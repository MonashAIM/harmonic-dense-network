<html>

<head>
    <title>upload the file</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>
    <div class="content-container">
        <form id="upload-file" method="post" enctype="multipart/form-data">
            <h2>Select your image:</h2>
            <fieldset>
                <label for="file">Select a file</label>
                <input name="file" type="file">
            </fieldset>
            <fieldset>
                <button id="upload-file-btn" type="button">Upload</button>
            </fieldset>
        </form>
        <img src="" id="upload">
        <button type='button' id='predict'>Predict</button>
        <img src="" id="myimg">
    </div>
</body>

<script>
    $(document).ready(function () {
        $('#upload-file').click(function () {
            var form_data = new FormData($('#upload-file')[0]);
            $.ajax({
                url: "/upload",
                type: "POST",
                data: form_data,
                contentType: false,
                cache: false,
                processData: false,
                success: function (data) {
                    console.log(data)
                    $("#upload").attr('src', data.upload_image_path);
                },
            });
        });
    });
    $(document).ready(function () {
        $('#predict').click(function () {
            $.ajax({
                url: "/predict/2d",
                type: "GET",
                success: function (response) {
                    console.log(response)
                    $("#myimg").attr('src', response.predict_path);
                },
                error: function (xhr) {
                    alert(xhr);
                }
            });
        });
    });
</script>

</html>