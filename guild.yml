- model: FC-Covid
  sourcecode:
    - "*.py"
    - exclude:
        - "src/models/Hard*.py"
        - "src/tests/*"
        - "src/notebooks/*"
        - ".vscode/*"
        - ".github/*"
        - "config/*"
        - "img/*"
        - "*.txt"
        - "*.md"
        - "*.ini"
  operations:
    prepare-data:
      main: src/steps/prepare
      flags-dest: params.yml
      flags-import: [dataset, train_size]
      requires:
        - file: src/data/covid
          target-type: copy
          target-path: src/data/
    train:
      main: src/steps/train
      sourcecode: no
      flags-dest: params.yml
      flags-import: all
      flags-import-skip: [train_size]
      output-scalars: off
      requires:
        - operation: prepare-data
          name: prepare-data
    _check:
      steps:
        - run: prepare-data
          expect:
            - file: src/data/covid_dataset.json
    pipeline:
      steps:
        - run: prepare-data
        - run: train
